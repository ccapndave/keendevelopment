<!DOCTYPE html>
<html class="min-h-full min-w-[250px]">
  <head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <title>Managing ATS in iOS9 Cordova applications</title>
    <link href="https://unpkg.com/smartphoto@1.1.0/css/smartphoto.min.css" rel="stylesheet"/>

    <link href="https://unpkg.com/flickity@2/dist/flickity.min.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Poppins:400,700" rel="stylesheet"/>
    <link href="/assets/css/tailwind.css" rel="stylesheet"/>
    <link href="/assets/css/native.css" rel="stylesheet"/>
    <link href="/assets/css/styles.css" rel="stylesheet"/>

    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Managing ATS in iOS9 Cordova applications | Keen Development</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="Managing ATS in iOS9 Cordova applications" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="If you are writing a Cordova app and noticed that it stopped working in iOS9, that’s probably because of Apple Transport Security (ATS). This effectively forces all AJAX communication in your Cordova app to be https." />
<meta property="og:description" content="If you are writing a Cordova app and noticed that it stopped working in iOS9, that’s probably because of Apple Transport Security (ATS). This effectively forces all AJAX communication in your Cordova app to be https." />
<meta property="og:site_name" content="Keen Development" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-09-24T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Managing ATS in iOS9 Cordova applications" />
<script type="application/ld+json">
{"datePublished":"2015-09-24T00:00:00+00:00","dateModified":"2015-09-24T00:00:00+00:00","description":"If you are writing a Cordova app and noticed that it stopped working in iOS9, that’s probably because of Apple Transport Security (ATS). This effectively forces all AJAX communication in your Cordova app to be https.","url":"/managing-ats-in-ios9-cordova-applications/","mainEntityOfPage":{"@type":"WebPage","@id":"/managing-ats-in-ios9-cordova-applications/"},"@type":"BlogPosting","headline":"Managing ATS in iOS9 Cordova applications","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body class="max-w-screen-xl mx-auto bg-lightgray overscroll-y-none">
    <div class="absolute left-0 right-0 h-12 shadow-md bg-code">
  <div class="flex justify-center w-full px-6 py-3 sm:justify-between">
    <a href="/">
      <img class="hidden h-7 sm:inline" src="/assets/images/Keen_bold_neg%201.svg"/>
    </a>
    <nav class="flex items-center text-base">
  <ol class="flex gap-4">
    
      <li class="text-white">
        <a href="/">Home</a>
      </li>
    
      <li class="text-white">
        <a href="/contact">Contact</a>
      </li>
    
      <li class="text-white">
        <a href="https://www.github.com/ccapndave">Github</a>
      </li>
    
  </ol>
</nav>
  </div>
</div>

<div class="px-5 pt-20 m-auto max-w-prose">
  <header class="flex justify-between">
    <div class="text-xl font-bold tracking-wide">Managing ATS in iOS9 Cordova applications<span class="font-normal text-orange">_</span>
    </div>
  </header>

  
  <div class="flex justify-between">
    <ul class="flex flex-wrap my-2 text-xs divide-x-2 font-extralight">
      
        <li>
          <span class="text-orange  mr-1 ">ATS</span>
        </li>
      
        <li>
          <span class="text-orange  ml-1 ">CORDOVA</span>
        </li>
      
    </ul>
  </div>


  <div class="flex items-center text-sm font-normal text-darkgray whitespace-nowrap">
    Sep 24, 2015
  </div>

  <article class="my-8 prose-sm prose text-green-700 sm:prose">
  <p>If you are writing a Cordova app and noticed that it stopped working in iOS9, that’s probably because of <a href="https://developer.apple.com/library/prerelease/ios/technotes/App-Transport-Security-Technote/">Apple Transport Security (ATS)</a>. This effectively forces all AJAX communication in your Cordova app to be https.</p>

<p>In principle this is a good thing as everyone should of course be using https for remote calls. However, if you develop against a local server with Vagrant or similar, chances are that you aren’t going to be using https.</p>

<p>Therefore you need to add an exception to the project’s app.plist file for your domain. Unfortunately Cordova overwrites this file each time you rebuild the project, so the best way to deal with this is using a hook and a small script that uses plistbuddy to update the file each time. Credit to James in <a href="http://stackoverflow.com/questions/22769111/add-entry-to-ios-plist-file-via-cordova-config-xml">this thread</a> for this approach.</p>

<p>So, create a file in <code class="language-plaintext highlighter-rouge">&lt;cordova-project&gt;/hooks/after_prepare/configure_ats.sh</code>, give it execute permissions with <code class="language-plaintext highlighter-rouge">chmod +x</code> and then use the following file contents, replacing <code class="language-plaintext highlighter-rouge">local.server</code> with whatever your local server is called.</p>

<p>You can add as many exceptions as you need (even against remote servers, although that’s not recommended and apparently might affect your app being accepted into the App Store).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nv">PLIST</span><span class="o">=</span>platforms/ios/<span class="k">*</span>/<span class="k">*</span><span class="nt">-Info</span>.plist

<span class="c"># Bypass ATS for test servers</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh"> |
Add :NSAppTransportSecurity:NSExceptionDomains:local.server:NSTemporaryExceptionAllowsInsecureHTTPLoads bool true
</span><span class="no">EOF

</span><span class="k">while </span><span class="nb">read </span>line
<span class="k">do</span>
/usr/libexec/PlistBuddy <span class="nt">-c</span> <span class="s2">"</span><span class="nv">$line</span><span class="s2">"</span> <span class="nv">$PLIST</span>
<span class="k">done

</span><span class="nb">true</span>
</code></pre></div></div>

</article>
</div>

  </body>

  <script src="https://unpkg.com/smartphoto@1.1.0/js/smartphoto.min.js"></script>
  <script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>
</html>
